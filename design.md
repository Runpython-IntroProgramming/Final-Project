# Compact Personal Planner

## Design Specification

For this project, I used Pycharm primarily to edit my code. The three libraries I used were pygame for the graphics of the program and calendar and datetime for comparing, storing, and recognizing numerical dates. I used Python 3 only.

In order to create the main screen which the user sees first, I first retrieved current date using datetime, found its weekday using a function called get_weekday, found the week's worth of days around that date through a function called get_week, and found the weeks of dates before, after, and 2 weeks after that date by using datetime's timedelta to pass dates 1 week before, after, and 2 weeks after the original date into get_week again. This information is retrieved by a function called get_weeks as a list of 4 lists, each containing 1 week's worth of dates. Using the indexes of the larger list and smaller lists, I organized the dates into an array, displayed by pygame as the calendar. Using the same coordinate system that I used to create the calendar, I created regions for mouse-click recognition that would record the date which the user clicked on the calendar and set that as the selectedDay. The selectedDay is used to determine what date to display in the center of the screen, and what tasks should be displayed above. On the main screen, keyboard input of the letter "f" is listened for, which triggers cycling of background images, stored as png files in the folder. Finally, I created two more mouse click regions for buttons in the top left and right for switching screens. Upon every mouse-click or key input, the program refreshes the screen to reflect changes. The program is able to detect mouse-clicks and key inputs through pygame's mouse-click and key input functionality, as the majority of the program runs constantly in a while loop, searching for inputs and changing the display constantly to reflect user inputs.

Upon clicking in the right button region, the "screen" variable is changed from 2 to 3, and the previous visuals, mouse click regions, and keys are no longer active as they are dependant on the "screen" variable. In order to get the list of recognized subjects from previous uses of the program, it is retrieved from a file called subjectDump.txt in the folder and converted from line by line into list form by searching for line breaks in subjectDump.txt. That list of subjects is displayed at the top of the screen by iterating through every subject in the subjects list and modifying the y-value of where it is displayed by multiplying its index. A new mouse-click region is defined for the subject query box, and clicking inside of it or switching to the right screen will set the "box" variable to 4, which corresponds to the subject query box. While the "box" variable is 4, the program listens for user key inputs, accepting only alphanumeric characters, and adds it to a running string which is displayed and updated with every key in the center of the screen. Pressing backspace set the string as itself save for its last index. A mouse-click registered outside of the query region sets the "box" variable to 0, which stops key-input listening. A mouse-click registered in the region defined for the "+" button triggers a function called addSubject, which checks if the string matches an existing subject and appends the running string in the subject query box to the program's list of subjects if it is not a repeat. Then it updates subjectDump.txt by triggering another function, saveSubjects, which overwrites subjectDump.txt to match the program's list of subjects, converting each string in the list into a new line in subjectDump.txt.  A mouse-click registered in the region defined for the "-" button triggers a function called delSubject, which deletes a string matching the string in the subject query box from the list of subjects and triggers saveSubjects. The displayed list of subjects above updates to match any changes as a result of the constant screen updates. A mouse-click region in the top left sets the "screen" variable back to 2 to return the user to the main screen.

Upon clicking in the left button region in the main screen, the "screen" variable is changed from 2 to 1, and the previous visuals, mouse click regions, and keys are no longer active. The three user-input fields are defined by 3 mouse-click regions. Upon clicking in a region, the "box" variable is changed to the corresponding integer, 1, 2 or 3, and key-inputs are listened for and added to a corresponding running string. Upon pressing enter while in the subject input box, a corresponding function is triggered from utility.py called subjectTagManager, which compares the running string in the subject input box with the list of recognizes subjects with each subject string trimmed to the same length as the running string. The trimmed subject which matches the running string is then set as the running string, creating the autocomplete functionality. Upon pressing enter while in the date input box, a corresponding function is triggered from utility.py called dateTagManager, which compares the running string in the subject input box with the list of recognized words such as "today", "tomorrow", "next", and "Monday". If the string matches either "today" or "tomorrow", the string is set to the current date found by datetime, or the current date plus one day by datetime's timedelta functionality. If the first 5 characters of the string is "next ", then those 5 characters are trimmed from the string, recorded for later, and the trimmed string is checked again. If a string matches a word for a day of the week, the next day with the corresponding day of the week after today is recorded through repeated 1-day timedelta additions and day of the week checks, and the string is set to that date with 7 days added to it through timedelta if it had "next " trimmed from it. Finally, upon pressing enter while in the title input box, the program checks for completed date and subject fields, and stitches the 3 inputs together into a list. That list is added to a larger list of events through a function called addEvent, which in turn triggers a function called saveEvents, which records the list of events in a file called eventDump.txt with each event recorded as a new line with date, subject, and title divided by "|" symbols. A mouse-click region in the top right sets the "screen" variable back to 2 to return the user to the main screen.

On the main screen, the list of tasks above is generated by retrieving the list of events from eventDump.txt by converting each line of the file into a list, with each entry divided by "|" symbols, which is appended to a running list of events. The date of each event is subtracted from the selectedDay variable mentioned earlier, and if the resulting value is negative, that event is added to a list called "tasks", as it is larger than the selectedDay, meaning that it comes after the selectedDay. The list of tasks is then displayed in a similar fashion to the subjects list on the right screen.
